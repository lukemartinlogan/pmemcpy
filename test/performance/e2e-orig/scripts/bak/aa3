#!/bin/sh

write_prog=write_3d_bp
read_prog=read_3d_bp
flush_prog=write_3d_bp

echo Run 3-D tests $write_prog $read_prog $flush_prog
date

#################################################
# READ TESTS
#################################################

for p in 512 1024 1536 2048 2560 3072 3584 4096
do

#hp=`expr $p / 2`

for i in 1 2 3 4 5
do

for per_proc_size in 32_32_32 64_64_64 128_128_128 256_256_256
do

aprun -n $p $read_prog 2 3d_28_16_16_${per_proc_size} 28 16 16
echo flush
date

aprun -n $p $read_prog 3 3d_28_16_16_${per_proc_size} 28 16 16
echo flush
date

aprun -n $p $read_prog 4 3d_28_16_16_${per_proc_size} 112 64
echo flush
date

aprun -n $p $read_prog 5 3d_28_16_16_${per_proc_size} 28 16 16
echo flush
date

aprun -n $p $read_prog 6 3d_28_16_16_${per_proc_size} 112 64
echo flush
date

done
done
done

for p in 512 1024 1536 2048 2560 3072 3584 4096
do

#hp=`expr $p / 2`

for i in 1 2 3 4 5
do

for per_proc_size in 32_32_32 64_64_64 128_128_128 256_256_256
do

aprun -n $p $read_prog 2 3d_32_32_16_${per_proc_size} 32 32 16
echo flush
date

aprun -n $p $read_prog 3 3d_32_32_16_${per_proc_size} 32 32 16
echo flush
date

aprun -n $p $read_prog 4 3d_32_32_16_${per_proc_size} 128 128
echo flush
date

aprun -n $p $read_prog 5 3d_32_32_16_${per_proc_size} 32 32 16
echo flush
date

aprun -n $p $read_prog 6 3d_32_32_16_${per_proc_size} 128 128
echo flush
date

done
done
done

